<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Manage Products</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Bootstrap -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css"
      rel="stylesheet"
    />

    <style>
      body {
        background: #f4f6f9;
      }
      .sidebar {
        min-height: 100vh;
        background: #111;
        color: #fff;
      }
      .sidebar a {
        color: #bbb;
        display: block;
        padding: 12px 20px;
        text-decoration: none;
      }
      .sidebar a:hover,
      .sidebar a.active {
        background: #ff3b3b;
        color: #fff;
      }
      img {
        border-radius: 6px;
      }
    </style>
  </head>

  <body>
    <div class="container-fluid">
      <div class="row">
        <!-- SIDEBAR -->
        <div class="col-md-3 col-lg-2 sidebar p-0">
          <h4 class="text-center py-4 border-bottom">Admin Panel</h4>
          <a href="dashboard.html"
            ><i class="bi bi-speedometer2 me-2"></i> Dashboard</a
          >
          <a href="products.html" class="active"
            ><i class="bi bi-box-seam me-2"></i> Products</a
          >
          <a href="order.html"><i class="bi bi-bag-check me-2"></i> Orders</a>
          <a href="../index.html"
            ><i class="bi bi-globe me-2"></i> View Website</a
          >
        </div>

        <!-- MAIN -->
        <div class="col-md-9 col-lg-10 p-4">
          <h2 class="mb-4">Add Product</h2>

          <!-- ADD PRODUCT FORM -->
          <div class="card mb-4">
            <div class="card-body">
              <div class="row g-3">
                <div class="col-md-4">
                  <input
                    type="text"
                    id="name"
                    class="form-control"
                    placeholder="Product Name"
                  />
                </div>
                <div class="col-md-3">
                  <input
                    type="number"
                    id="price"
                    class="form-control"
                    placeholder="Price"
                  />
                </div>
                <div class="col-md-4">
                  <input
                    type="text"
                    id="image"
                    class="form-control"
                    placeholder="Image URL"
                  />
                </div>
                <div class="col-md-1 d-grid">
                  <button class="btn btn-danger" onclick="addProduct()">
                    Add
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- PRODUCTS TABLE -->
          <h4>Products</h4>
          <div class="table-responsive">
            <table class="table table-striped align-middle">
              <thead>
                <tr>
                  <th>#</th>
                  <th>Image</th>
                  <th>Name</th>
                  <th>Price</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody id="productTable"></tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <script>
      let products = JSON.parse(localStorage.getItem("products")) || [];

      function renderProducts() {
        const table = document.getElementById("productTable");
        table.innerHTML = "";

        products.forEach((product, index) => {
          table.innerHTML += `
        <tr>
          <td>${index + 1}</td>
          <td><img src="${product.image}" width="60"></td>
          <td>${product.name}</td>
          <td>â‚¦${product.price}</td>
          <td>
            <button class="btn btn-sm btn-danger" onclick="deleteProduct(${index})">
              <i class="bi bi-trash"></i>
            </button>
          </td>
        </tr>
      `;
        });

        localStorage.setItem("products", JSON.stringify(products));
      }

      function addProduct() {
        const name = document.getElementById("name").value.trim();
        const price = document.getElementById("price").value.trim();
        const image = document.getElementById("image").value.trim();

        if (!name || !price || !image) {
          alert("Please fill all fields");
          return;
        }

        products.push({ name, price, image });
        renderProducts();

        document.getElementById("name").value = "";
        document.getElementById("price").value = "";
        document.getElementById("image").value = "";
      }

      function deleteProduct(index) {
        products.splice(index, 1);
        renderProducts();
      }

      renderProducts();
    </script>
  </body>
</html>
