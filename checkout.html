<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Checkout</title>

    <!-- AOS -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <style>
      body {
        font-family: Arial, sans-serif;
        background: #f4f4f7;
        margin: 0;
        padding: 0;
      }

      .checkout-container {
        max-width: 900px;
        margin: 40px auto;
        background: #fff;
        padding: 25px;
        border-radius: 12px;
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
      }

      h2 {
        margin-bottom: 20px;
        font-size: 24px;
      }

      .section {
        margin-bottom: 30px;
      }

      .section h3 {
        margin-bottom: 12px;
        font-size: 18px;
        border-left: 4px solid #111;
        padding-left: 10px;
      }

      .form-group {
        margin-bottom: 15px;
      }

      label {
        display: block;
        margin-bottom: 6px;
        font-weight: bold;
      }

      input,
      select {
        width: 100%;
        padding: 10px;
        border-radius: 8px;
        border: 1px solid #ccc;
        font-size: 14px;
      }

      .order-summary {
        background: #f9f9f9;
        padding: 15px;
        border-radius: 8px;
      }

      .order-item {
        display: flex;
        justify-content: space-between;
        margin-bottom: 10px;
      }

      .total {
        font-size: 18px;
        font-weight: bold;
        margin-top: 10px;
        border-top: 1px solid #ccc;
        padding-top: 10px;
      }

      .btn-checkout {
        display: block;
        width: 100%;
        background: #111;
        color: #fff;
        text-align: center;
        padding: 12px;
        font-size: 16px;
        border-radius: 8px;
        text-decoration: none;
        font-weight: bold;
        margin-top: 20px;
        transition: background 0.2s ease;
        cursor: pointer;
      }

      .btn-checkout:hover {
        background: #ff3b3b;
      }

      .bank-info {
        margin-top: 5px;
        font-size: 14px;
        font-weight: bold;
        color: #111;
      }
    </style>
  </head>
  <body>
    <div class="checkout-container" data-aos="fade-up">
      <h2>Checkout</h2>

      <!-- Customer Info -->
      <div class="section" data-aos="fade-up" data-aos-delay="100">
        <h3>Customer Information</h3>
        <div class="form-group">
          <label>Full Name</label>
          <input type="text" placeholder="Enter your name" />
        </div>

        <div class="form-group">
          <label>Email Address</label>
          <input type="email" placeholder="Enter your email" />
        </div>

        <div class="form-group">
          <label>Phone Number</label>
          <input type="text" placeholder="Enter phone number" />
        </div>
      </div>

      <!-- Shipping -->
      <div class="section" data-aos="fade-up" data-aos-delay="200">
        <h3>Shipping Address</h3>
        <div class="form-group">
          <label>Street Address</label>
          <input type="text" placeholder="House / Street / Area" />
        </div>
        <div class="form-group">
          <label>City</label>
          <input type="text" placeholder="City" />
        </div>
        <div class="form-group">
          <label>State</label>
          <input type="text" placeholder="State" />
        </div>
        <div class="form-group">
          <label>Delivery Method</label>
          <select>
            <option>Standard Delivery (2–4 days)</option>
            <option>Express Delivery (1–2 days)</option>
          </select>
        </div>
      </div>

      <!-- Payment -->
      <div class="section" data-aos="fade-up" data-aos-delay="300">
        <h3>Payment Method</h3>
        <div class="form-group">
          <label>Select Payment</label>
          <select id="paymentMethod">
            <option value="cod">Pay on Delivery</option>
            <option value="bank">Bank Transfer</option>
            <option value="gift">Gift Card</option>
          </select>
        </div>

        <!-- Conditional fields -->
        <div class="form-group d-none" id="bankField">
          <label>Bank Account Number (Your Account)</label>
          <input type="text" placeholder="Enter your bank account number" />
          <div class="bank-info" id="bankInfo">
            Send money to: 7054556630, opay Bank
          </div>
        </div>

        <div class="form-group d-none" id="giftField">
          <label>Gift Card Code</label>
          <input type="text" placeholder="Enter gift card code" />
        </div>
      </div>

      <!-- Order Summary -->
      <div class="section" data-aos="fade-up" data-aos-delay="400">
        <h3>Order Summary</h3>
        <div class="order-summary">
          <div class="order-item">
            <span>Men's Runner X</span>
            <span id="itemPrice">₦18,000</span>
          </div>
          <div class="order-item">
            <span>Delivery Fee</span>
            <span id="deliveryFee">₦2,000</span>
          </div>
          <div class="total" id="totalAmount">Total: ₦20,000</div>
        </div>
      </div>

      <!-- Checkout Button -->
      <button
        class="btn-checkout"
        data-bs-toggle="modal"
        data-bs-target="#checkoutModal"
      >
        Place Order
      </button>
    </div>

    <!-- Modal -->
    <div
      class="modal fade"
      id="checkoutModal"
      tabindex="-1"
      aria-labelledby="checkoutModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="checkoutModalLabel">Checkout Status</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body" id="modalMessage"></div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Close
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="https://js.paystack.co/v1/inline.js"></script>

    <script>
      AOS.init({ duration: 800, easing: "ease-out-quart", once: true });

      const paymentMethod = document.getElementById("paymentMethod");
      const bankField = document.getElementById("bankField");
      const giftField = document.getElementById("giftField");
      const checkoutBtn = document.querySelector(".btn-checkout");
      const modalMessage = document.getElementById("modalMessage");

      const totalAmountEl = document.getElementById("totalAmount");
      const itemPrice = 18000;
      const deliveryFee = 2000;
      const giftDiscount = 2000;

      // Show/hide conditional fields
      paymentMethod.addEventListener("change", () => {
        bankField.classList.toggle("d-none", paymentMethod.value !== "bank");
        giftField.classList.toggle("d-none", paymentMethod.value !== "gift");
        updateTotal();
      });

      function updateTotal() {
        let total = itemPrice + deliveryFee;
        if (paymentMethod.value === "gift") {
          const giftInput = giftField.querySelector("input");
          if (giftInput.value.trim() !== "") {
            total -= giftDiscount;
          }
        }
        totalAmountEl.innerText = "Total: ₦" + total.toLocaleString();
        return total;
      }

      checkoutBtn.addEventListener("click", (e) => {
        const fields = document.querySelectorAll("input, select");
        let errors = false;
        let firstEmpty = null;

        fields.forEach((field) => {
          if (!field.closest(".d-none") && field.value.trim() === "") {
            field.style.border = "2px solid red";
            if (!firstEmpty) firstEmpty = field;
            errors = true;
          } else {
            field.style.border = "1px solid #ccc";
          }
        });

        const total = updateTotal();

        if (errors) {
          modalMessage.innerHTML =
            '<div class="alert alert-danger">Please fill in all required fields before placing your order.</div>';
          // Scroll to first empty field
          firstEmpty.scrollIntoView({ behavior: "smooth", block: "center" });
        } else {
          let paymentDetails = "";
          if (paymentMethod.value === "bank") {
            paymentDetails =
              "<p>Send money to: <strong>7054556630, opay Bank</strong></p>";
          } else if (paymentMethod.value === "gift") {
            paymentDetails =
              "<p>Gift card applied! ₦" +
              giftDiscount.toLocaleString() +
              " discount applied.</p>";
          }

          modalMessage.innerHTML = `
          <div class="alert alert-success">
            Order placed successfully!<br/>
            <p>Total Amount: ₦${total.toLocaleString()}</p>
            ${paymentDetails}
          </div>
        `;

          // Optionally clear fields
          fields.forEach((field) => (field.value = ""));
          updateTotal();
        }
      });

      // Update total live if gift card input changes
      const giftInputField = giftField.querySelector("input");
      giftInputField.addEventListener("input", updateTotal);
    </script>
  </body>
</html>
